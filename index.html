<html><head>
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script src="https://d3js.org/topojson.v2.min.js"></script>

  <style>
  .country {
    fill: #000000;
  }

  .outline {
    stroke: white;
    stroke-width: 1px;
    fill: none;
  }

  .graticule {
    fill: none;
    stroke: #d3d3d3;
    stroke-width: 1px;
  }

  </style>

</head>
<body>

<svg id="worldmap" height="800" width="1200" style="background:#ffffff; margin-top:50px "  >

</svg>

<script id="map">

const svg = d3.select("#worldmap");
const width1 = svg.attr("width");
const height1 = svg.attr("height");
const margin = { top: 20, right: 20, bottom: 20, left:20};
const mapWidth = width1 - margin.left - margin.right;
const mapHeight = height1 - margin.top - margin.bottom;
const map = svg.append("g")
                .attr("transform","translate("+margin.left+","+margin.top+")");

const requestData = async function() {

  const world = await d3.json("datasets/countries-50m.json");
  console.log(world)

var countries = topojson.feature(world, world.objects.countries);
var countriesMesh = topojson.mesh(world, world.objects.countries);
var projection = d3.geoNaturalEarth1().fitSize([mapWidth, mapHeight], countries);
var path = d3.geoPath().projection(projection);
console.log(countriesMesh)

var graticule = d3.geoGraticule10();
map.append("path").attr("class", "graticule").attr("d", path(graticule))

map.selectAll("path.country").data(countries.features)
   .join("path")
   .attr("class", "country")
   .attr("note", d => d.id)
   .attr("d", path);

map.append("path").datum(countriesMesh)
   .attr("class", "outline")
   .attr("d", path);


};

requestData()
</script>

</body>

  </html>
